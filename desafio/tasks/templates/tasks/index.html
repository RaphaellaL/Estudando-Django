<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Index</title>
      <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>
    <div class="container">
         <nav class="navbar navbar-light bg-light">
                        <div class="container-fluid">
                                {% if user.is_authenticated %}     
                          <a class="navbar-brand"><strong>OLÁ {{user}}</strong></a>
                                    <a  class="nav-link active" href="/accounts/logout">Sair <img src="https://img.icons8.com/fluency-systems-filled/20/000000/shutdown.png"/></a>
                            {% endif %}
                        
                        </div>
            </nav><br/>
            <div class="col-lg-12">
                    <div class="row">
                        <div class="col-12">
                                {% if messages %}
                                <ul class="messages">
                                    {% for message in messages %}
                                        <li {% if message.tags %}class="alert alert-{{message.tags}}"{% endif %} style="list-style:none"><img src="https://img.icons8.com/cotton/30/000000/delete-sign--v2.png"/> {{message}}</li>
                                    {% endfor %}
                                </ul>
                            {% endif %}
                        </div>
                        
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <div class="col-3">
                                    <a  href="newtask/">
                                    <button type="button" class="btn btn-outline-primary"> Adicionar <img src="https://img.icons8.com/color/24/000000/filled-plus-2-math.png"/></button>
                                </a>
                            </div><br/>

                            <div class="row">
                            <div class="col-3">
                                    {% for task in tasks %}
                                <div class="card" style="width: 18rem;">
                                    <div class="card-body">
                                      <h2 class="card-title"  href="/task/{{task.id}}"> <img src="https://img.icons8.com/fluency/48/000000/link-company-parent.png"/> {{task.empresa}}</h2>
                                      <h6 class="card-subtitle mb-2 text-muted"  href="/task/{{task.id}}"><img src="https://img.icons8.com/cotton/20/000000/barcode-scanner--v3.png"/> Ticker:  {{task.ticker}}</h6>
                                      <h6 class="card-subtitle mb-2 text-muted"  href="/task/{{task.id}}"><img src="https://img.icons8.com/carbon-copy/30/000000/us-dollar.png"/>Preço:  {{task.preco}}</h6>
                                      <a href="/delete/{{task.id}}" class="btn btn-outline-danger" style="float:right"><img src="https://img.icons8.com/plasticine/24/000000/filled-trash.png"/></a>
                                    </div>
                                  </div>
                                  {% endfor %}
                                  

                            </div>

                        </div>

                        </div>

                        <div class="col-6">
                                <img src="https://img.icons8.com/plumpy/24/000000/mark-as-favorite.png"/><strong> Empresa Favorita</strong> 
                                <div class="row">
                                    <div class="">
                                            <canvas id="myChart" style="width:100%;max-width:700px"></canvas>
                                    </div>


                                </div>
                                
    
                            </div>
                            


                    </div>
            </div>        



    </div>
    
</body>
</html>


 <!-- JavaScript Bundle with Popper -->
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
 
     
 </body>
 </html>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
 <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
 
 <script>
 var ctx = document.getElementById('myChart').getContext('2d');
 const myChart = new Chart(ctx, {
         type: 'line',
         data: {
             labels: [
                 "09 Mai 2022",
                 "06 Mai 2022",
                 "05 Mai 2022",
                 "04 Mai 2022",
                 "03 Mai 2022",
                 "02 Mai 2022",
                 "29 Abr 2022",
                 "28 Abr 2022",
                 "27 Abr 2022",
                 "26 Abr 2022",
                 "25 Abr 2022",
                 "22 Abr 2022",
                 "21 Abr 2022",
                 "20 Abr 2022",
                 "19 Abr 2022",
                 "18 Abr 2022",
                 "15 Abr 2022",
                 "14 Abr 2022",
                 "13 Abr 2022",
                 "12 Abr 2022",
                 "11 Abr 2022",
             ],
             datasets: [{
                 label: 'PETR4',
                 data: [ 
                 '32.46',
                 '32.16',
                 '32.97',
                 '32.05',
                 '32.10',
                 '30.12',
                 '29.94',
                 '30.30',
                 '30.32',
                 '29.99',
                 '29.96',
                 '30.18',
                 '30.55',
                 '31.79',
                 '31.79',
                 '31.60',
                 '30.81',
                 '31.27',
                 '31.27',
                 '34.74',
                 '33.95',
                 '33.99'],
                 backgroundColor: "#375da3",
                 borderColor: "#FFFFFF",
                 borderWidth: 0.2
             }]
         },
         
     });
 
     // import axios from "axios";
     
     const options = {
       method: 'GET',
       url: 'https://mboum.p.rapidapi.com/qu/quote/',
       headers: {
         'X-RapidAPI-Host': 'mboum.p.rapidapi.com',
         'X-RapidAPI-Key': '8acc85abafmsh958dadcf9935df0p10e1d5jsn9f9e8965933d'
       }
     };
     
     axios.request(options).then(function (response) {
         console.log(response.data);
     }).catch(function (error) {
         console.error(error);
     });
 
 
 
 </script>